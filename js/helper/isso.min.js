!function(){var requirejs,require,define;!function(e){function t(e,t){return g.call(e,t)}function n(e,t){var n,o,i,r,a,s,l,c,d,p,u,m,f=t&&t.split("/"),h=v.map,b=h&&h["*"]||{};if(e){for(e=e.split("/"),a=e.length-1,v.nodeIdCompat&&w.test(e[a])&&(e[a]=e[a].replace(w,"")),"."===e[0].charAt(0)&&f&&(m=f.slice(0,f.length-1),e=m.concat(e)),d=0;d<e.length;d++)if("."===(u=e[d]))e.splice(d,1),d-=1;else if(".."===u){if(0===d||1===d&&".."===e[2]||".."===e[d-1])continue;d>0&&(e.splice(d-1,2),d-=2)}e=e.join("/")}if((f||b)&&h){for(n=e.split("/"),d=n.length;d>0;d-=1){if(o=n.slice(0,d).join("/"),f)for(p=f.length;p>0;p-=1)if((i=h[f.slice(0,p).join("/")])&&(i=i[o])){r=i,s=d;break}if(r)break;!l&&b&&b[o]&&(l=b[o],c=d)}!r&&l&&(r=l,s=c),r&&(n.splice(0,s,r),e=n.join("/"))}return e}function o(t,n){return function(){var o=x.call(arguments,0);return"string"!=typeof o[0]&&1===o.length&&o.push(null),p.apply(e,o.concat([t,n]))}}function i(e){return function(t){return n(t,e)}}function r(e){return function(t){f[e]=t}}function a(n){if(t(h,n)){var o=h[n];delete h[n],b[n]=!0,d.apply(e,o)}if(!t(f,n)&&!t(b,n))throw new Error("No "+n);return f[n]}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function l(e){return e?s(e):[]}function c(e){return function(){return v&&v.config&&v.config[e]||{}}}var d,p,u,m,f={},h={},v={},b={},g=Object.prototype.hasOwnProperty,x=[].slice,w=/\.js$/;u=function(e,t){var o,r=s(e),l=r[0],c=t[1];return e=r[1],l&&(l=n(l,c),o=a(l)),l?e=o&&o.normalize?o.normalize(e,i(c)):n(e,c):(e=n(e,c),r=s(e),l=r[0],e=r[1],l&&(o=a(l))),{f:l?l+"!"+e:e,n:e,pr:l,p:o}},m={require:function(e){return o(e)},exports:function(e){var t=f[e];return void 0!==t?t:f[e]={}},module:function(e){return{id:e,uri:"",exports:f[e],config:c(e)}}},d=function(n,i,s,c){var d,p,v,g,x,w,y,k=[],_=typeof s;if(c=c||n,w=l(c),"undefined"===_||"function"===_){for(i=!i.length&&s.length?["require","exports","module"]:i,x=0;x<i.length;x+=1)if(g=u(i[x],w),"require"===(p=g.f))k[x]=m.require(n);else if("exports"===p)k[x]=m.exports(n),y=!0;else if("module"===p)d=k[x]=m.module(n);else if(t(f,p)||t(h,p)||t(b,p))k[x]=a(p);else{if(!g.p)throw new Error(n+" missing "+p);g.p.load(g.n,o(c,!0),r(p),{}),k[x]=f[p]}v=s?s.apply(f[n],k):void 0,n&&(d&&d.exports!==e&&d.exports!==f[n]?f[n]=d.exports:v===e&&y||(f[n]=v))}else n&&(f[n]=s)},requirejs=require=p=function(t,n,o,i,r){if("string"==typeof t)return m[t]?m[t](n):a(u(t,l(n)).f);if(!t.splice){if(v=t,v.deps&&p(v.deps,v.callback),!n)return;n.splice?(t=n,n=o,o=null):t=e}return n=n||function(){},"function"==typeof o&&(o=i,i=r),i?d(e,t,n,o):setTimeout(function(){d(e,t,n,o)},4),p},p.config=function(e){return p(e)},requirejs._defined=f,define=function(e,n,o){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(o=n,n=[]),t(f,e)||t(h,e)||(h[e]=[e,n,o])},define.amd={jQuery:!0}}(),define("components/almond/almond",function(){}),define("app/lib/ready",[],function(){"use strict";var e=!1,t=function(t){e||(e=!0,t())};return function(e){document.addEventListener("DOMContentLoaded",function(){t(e)}),"interactive"!==document.readyState&&"complete"!==document.readyState||t(e)}}),define("app/config",[],function(){"use strict";for(var e={css:!0,lang:(navigator.language||navigator.userLanguage).split("-")[0],"reply-to-self":!1,"require-email":!1,"require-author":!1,"reply-notifications":!1,"max-comments-top":"inf","max-comments-nested":5,"reveal-on-click":5,gravatar:!1,avatar:!0,"avatar-bg":"#f0f0f0","avatar-fg":["#9abf88","#5698c4","#e279a3","#9163b6","#be5168","#f19670","#e4bf80","#447c69"].join(" "),vote:!0,"vote-levels":null,feed:!1},t=document.getElementsByTagName("script"),n=0;n<t.length;n++)for(var o=0;o<t[n].attributes.length;o++){var i=t[n].attributes[o];if(/^data-isso-/.test(i.name))try{e[i.name.substring(10)]=JSON.parse(i.value)}catch(t){e[i.name.substring(10)]=i.value}}return e["avatar-fg"]=e["avatar-fg"].split(" "),e}),define("app/i18n/en",{"postbox-text":"Type Comment Here (at least 3 chars)","postbox-author":"Name (optional)","postbox-email":"E-mail (optional)","postbox-website":"Website (optional)","postbox-preview":"Preview","postbox-edit":"Edit","postbox-submit":"Submit","postbox-notification":"Subscribe to email notification of replies","num-comments":"One Comment\n{{ n }} Comments","no-comments":"No Comments Yet","atom-feed":"Atom feed","comment-reply":"Reply","comment-edit":"Edit","comment-save":"Save","comment-delete":"Delete","comment-confirm":"Confirm","comment-close":"Close","comment-cancel":"Cancel","comment-deleted":"Comment deleted.","comment-queued":"Comment in queue for moderation.","comment-anonymous":"Anonymous","comment-hidden":"{{ n }} Hidden","date-now":"right now","date-minute":"a minute ago\n{{ n }} minutes ago","date-hour":"an hour ago\n{{ n }} hours ago","date-day":"Yesterday\n{{ n }} days ago","date-week":"last week\n{{ n }} weeks ago","date-month":"last month\n{{ n }} months ago","date-year":"last year\n{{ n }} years ago","postbox-email-info":"E-Mail will not be made public"}),define("app/i18n/vi",{"postbox-text":"Nhập bình luận tại đây (tối thiểu 3 ký tự)","postbox-author":"Tên (tùy chọn)","postbox-email":"E-mail (tùy chọn)","postbox-website":"Website (tùy chọn)","postbox-preview":"Xem trước","postbox-edit":"Sửa","postbox-submit":"Gửi","postbox-notification":" Nhận thông báo khi có trả lời","postbox-email-info":"E-Mail sẽ không được công khai dưới bất kì hình thức nào.","num-comments":"Một bình luận\n{{ n }} bình luận","no-comments":"Chưa có bình luận nào","atom-feed":"Atom feed","comment-reply":"Trả lời","comment-edit":"Sửa","comment-save":"Lưu","comment-delete":" • Xóa","comment-confirm":" • Xác nhận","comment-close":"Đóng","comment-cancel":" • Hủy","comment-deleted":"Đã xóa bình luận.","comment-queued":" Đang chờ duyệt","comment-anonymous":"Ẩn danh","comment-hidden":"Xem thêm {{ n }} bình luận.","date-now":"vừa mới","date-minute":"một phút trước\n{{ n }} phút trước","date-hour":"một giờ trước\n{{ n }} giờ trước","date-day":"Hôm qua\n{{ n }} ngày trước","date-week":"Tuần qua\n{{ n }} tuần trước","date-month":"Tháng trước\n{{ n }} tháng trước","date-year":"Năm trước\n{{ n }} năm trước"}),define("app/i18n",["app/config","app/i18n/en","app/i18n/vi"],function(e,t,n){"use strict";var o=function(e){switch(e){case"en":case"vi":return function(e,t){return e[1===t?0:1]};default:return null}},i=e.lang;o(i)||(i="en");var r={en:t,vi:n},a=o(i),s=function(n){return e[n+"-text-"+i]||r[i][n]||t[n]||"???"};return{lang:i,translate:s,pluralize:function(e,t){var n;return n=s(e),n.indexOf("\n")>-1&&(n=a(n.split("\n"),+t)),n?n.replace("{{ n }}",+t):n}}}),define("app/lib/promise",[],function(){"use strict";var e=function(e){console.log(e)},t=function(){this.success=[],this.errors=[]};t.prototype.then=function(t,n){this.success.push(t),n?this.errors.push(n):this.errors.push(e)};var n=function(){this.promise=new t};n.prototype={promise:t,resolve:function(e){this.promise.success.forEach(function(t){window.setTimeout(function(){t(e)},0)})},reject:function(e){this.promise.errors.forEach(function(t){window.setTimeout(function(){t(e)},0)})}};var o=function(e,n){return e instanceof t?e.then(n):n(e)};return{defer:function(){return new n},when:o}}),define("app/globals",[],function(){"use strict";var e=function(){this.values=[]};return e.prototype.update=function(e){this.values.push((new Date).getTime()-e.getTime())},e.prototype.localTime=function(){return new Date((new Date).getTime()-this.values.reduce(function(e,t){return e+t})/this.values.length)},{offset:new e}}),define("app/api",["app/lib/promise","app/globals"],function(e,t){"use strict";for(var n,o,i=function(){return window.location.pathname},r=document.getElementsByTagName("script"),a=0;a<r.length;a++)if(r[a].hasAttribute("data-isso")){o=r[a].getAttribute("data-isso");break}if(!o){for(a=0;a<r.length;a++)if(r[a].getAttribute("async")||r[a].getAttribute("defer"))throw"Isso's automatic configuration detection failed, please refer to https://github.com/posativ/isso#client-configuration and add a custom `data-isso` attribute.";n=r[r.length-1],o=n.src.substring(0,n.src.length-"/js/embed.min.js".length)}"/"===o[o.length-1]&&(o=o.substring(0,o.length-1));var s=function(e,n,o,i,r){function a(){var e=s.getResponseHeader("Date");null!==e&&t.offset.update(new Date(e));var n=s.getResponseHeader("X-Set-Cookie");n&&n.match(/^isso-/)&&(document.cookie=n),s.status>=500?r&&r(s.body):i({status:s.status,body:s.responseText})}var s=new XMLHttpRequest;try{s.open(e,n,!0),s.withCredentials=!0,s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){4===s.readyState&&a()}}catch(e){(r||console.log)(e.message)}s.send(o)},l=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&null!==e[n]&&void 0!==e[n]&&(t+=n+"="+encodeURIComponent(e[n])+"&");return t.substring(0,t.length-1)};return{endpoint:o,salt:"Eech7co8Ohloopo9Ol6baimi",create:function(t,n){var r=e.defer();return s("POST",o+"/new?"+l({uri:t||i()}),JSON.stringify(n),function(e){201===e.status||202===e.status?r.resolve(JSON.parse(e.body)):r.reject(e.body)}),r.promise},modify:function(t,n){var i=e.defer();return s("PUT",o+"/id/"+t,JSON.stringify(n),function(e){403===e.status?i.reject("Not authorized to modify this comment!"):200===e.status?i.resolve(JSON.parse(e.body)):i.reject(e.body)}),i.promise},remove:function(t){var n=e.defer();return s("DELETE",o+"/id/"+t,null,function(e){403===e.status?n.reject("Not authorized to remove this comment!"):200===e.status?n.resolve(null===JSON.parse(e.body)):n.reject(e.body)}),n.promise},view:function(t,n){var i=e.defer();return s("GET",o+"/id/"+t+"?"+l({plain:n}),null,function(e){i.resolve(JSON.parse(e.body))}),i.promise},fetch:function(t,n,r,a,c){void 0===n&&(n="inf"),void 0===r&&(r="inf"),void 0===a&&(a=null);var d={uri:t||i(),after:c,parent:a};"inf"!==n&&(d.limit=n),"inf"!==r&&(d.nested_limit=r);var p=e.defer();return s("GET",o+"/?"+l(d),null,function(e){200===e.status?p.resolve(JSON.parse(e.body)):404===e.status?p.resolve({total_replies:0}):p.reject(e.body)}),p.promise},count:function(t){var n=e.defer();return s("POST",o+"/count",JSON.stringify(t),function(e){200===e.status?n.resolve(JSON.parse(e.body)):n.reject(e.body)}),n.promise},like:function(t){var n=e.defer();return s("POST",o+"/id/"+t+"/like",null,function(e){n.resolve(JSON.parse(e.body))}),n.promise},dislike:function(t){var n=e.defer();return s("POST",o+"/id/"+t+"/dislike",null,function(e){n.resolve(JSON.parse(e.body))}),n.promise},feed:function(e){return o+"/feed?"+l({uri:e||i()})},preview:function(t){var n=e.defer();return s("POST",o+"/preview",JSON.stringify({text:t}),function(e){200===e.status?n.resolve(JSON.parse(e.body).text):n.reject(e.body)}),n.promise}}}),define("app/dom",[],function(){"use strict";function e(e){this.obj=e,this.replace=function(t){var o=n.htmlify(t);return e.parentNode.replaceChild(o.obj,e),o},this.prepend=function(t){var o=n.htmlify(t);return e.insertBefore(o.obj,e.firstChild),o},this.append=function(t){var o=n.htmlify(t);return e.appendChild(o.obj),o},this.insertAfter=function(t){var o=n.htmlify(t);return e.parentNode.insertBefore(o.obj,e.nextSibling),o},this.on=function(t,n,o){e.addEventListener(t,function(e){n(e),(void 0===o||o)&&e.preventDefault()})},this.toggle=function(e,n,o){var i=new t(n,o);this.on(e,function(){i.next()})},this.detach=function(){return e.parentNode.removeChild(this.obj),this},this.remove=function(){e.parentNode.removeChild(this.obj)},this.show=function(){e.style.display="block"},this.hide=function(){e.style.display="none"},this.setText=function(t){e.textContent=t},this.setHtml=function(t){e.innerHTML=t},this.blur=function(){e.blur()},this.focus=function(){e.focus()},this.scrollIntoView=function(t){e.scrollIntoView(t)},this.checked=function(){return e.checked},this.setAttribute=function(t,n){e.setAttribute(t,n)},this.getAttribute=function(t){return e.getAttribute(t)},this.classList=e.classList,Object.defineProperties(this,{textContent:{get:function(){return e.textContent},set:function(t){e.textContent=t}},innerHTML:{get:function(){return e.innerHTML},set:function(t){e.innerHTML=t}},value:{get:function(){return e.value},set:function(t){e.value=t}},placeholder:{get:function(){return e.placeholder},set:function(t){e.placeholder=t}}})}var t=function(e,t){this.state=!1,this.next=function(){this.state?(this.state=!1,t(this)):(this.state=!0,e(this))},this.wait=function(){this.state=!this.state}},n=function(t,n,o){void 0===o&&(o=!0),n||(n=window.document),n instanceof e&&(n=n.obj);var i=[].slice.call(n.querySelectorAll(t),0);return 0===i.length?null:1===i.length&&o?new e(i[0]):(i=[].slice.call(i,0),i.map(function(t){return new e(t)}))};return n.htmlify=function(t){if(t instanceof e)return t;if(t instanceof window.Element)return new e(t);var o=n.new("div");return o.innerHTML=t,new e(o.firstChild)},n.new=function(e,t){var n=document.createElement(e.split(".")[0]);return e.split(".").slice(1).forEach(function(e){n.classList.add(e)}),["A","LINK"].indexOf(n.nodeName)>-1&&(n.href="#"),t||0===t||(t=""),["TEXTAREA","INPUT"].indexOf(n.nodeName)>-1?n.value=t:n.textContent=t,n},n.each=function(e,t){Array.prototype.forEach.call(document.getElementsByTagName(e),t)},n}),define("app/utils",["app/i18n"],function(e){"use strict";var t,n=function(e){return(document.cookie.match("(^|; )"+e+"=([^;]*)")||0)[2]},o=function(e,t,n){return n=n||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(n)+e},i=function(t,n){var o=(t.getTime()-n.getTime())/1e3;(isNaN(o)||o<0)&&(o=0);var i=Math.floor(o/60),r=Math.floor(i/60),a=Math.floor(r/24);return o<=45&&e.translate("date-now")||o<=90&&e.pluralize("date-minute",1)||i<=45&&e.pluralize("date-minute",i)||i<=90&&e.pluralize("date-hour",1)||r<=22&&e.pluralize("date-hour",r)||r<=36&&e.pluralize("date-day",1)||a<=5&&e.pluralize("date-day",a)||a<=8&&e.pluralize("date-week",1)||a<=21&&e.pluralize("date-week",Math.floor(a/7))||a<=45&&e.pluralize("date-month",1)||a<=345&&e.pluralize("date-month",Math.floor(a/30))||a<=547&&e.pluralize("date-year",1)||e.pluralize("date-year",Math.floor(a/365.25))},r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},a=function(e){return String(e).replace(/[&<>"'\/]/g,function(e){return r[e]})},s=function(e){var t=document.createElement("div");return t.innerHTML=e.replace(/<div><br><\/div>/gi,"<br>").replace(/<div>/gi,"<br>").replace(/<br>/gi,"\n").replace(/&nbsp;/gi," "),t.textContent.trim()},l=function(e){return e=a(e),e.replace(/\n\n/gi,"<br><div><br></div>").replace(/\n/gi,"<br>")};try{localStorage.setItem("x","y"),localStorage.removeItem("x"),t=localStorage}catch(e){t=function(e){return{setItem:function(t,n){e[t]=n},getItem:function(t){return void 0!==e[t]?e[t]:null},removeItem:function(t){delete e[t]}}}({})}return{cookie:n,pad:o,ago:i,text:s,detext:l,localStorageImpl:t}}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("libjs-jade-runtime",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.jade=e()}}(function(){return function e(t,n,o){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return i(n||e)},d,d.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){"use strict";function o(e){return null!=e&&""!==e}function i(e){return(Array.isArray(e)?e.map(i):e&&"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}):[e]).filter(o).join(" ")}function r(e){return s[e]||e}function a(e){var t=String(e).replace(l,r);return t===""+e?e:t}n.merge=function e(t,n){if(1===arguments.length){for(var i=t[0],r=1;r<t.length;r++)i=e(i,t[r]);return i}var a=t.class,s=n.class;(a||s)&&(a=a||[],s=s||[],Array.isArray(a)||(a=[a]),Array.isArray(s)||(s=[s]),t.class=a.concat(s).filter(o));for(var l in n)"class"!=l&&(t[l]=n[l]);return t},n.joinClasses=i,n.cls=function(e,t){for(var o=[],r=0;r<e.length;r++)t&&t[r]?o.push(n.escape(i([e[r]]))):o.push(i(e[r]));var a=i(o);return a.length?' class="'+a+'"':""},n.style=function(e){return e&&"object"==typeof e?Object.keys(e).map(function(t){return t+":"+e[t]}).join(";"):e},n.attr=function(e,t,o,i){return"style"===e&&(t=n.style(t)),"boolean"==typeof t||null==t?t?" "+(i?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof t?(-1!==JSON.stringify(t).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),t&&"function"==typeof t.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+e+"='"+JSON.stringify(t).replace(/'/g,"&apos;")+"'"):o?(t&&"function"==typeof t.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+n.escape(t)+'"'):(t&&"function"==typeof t.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+t+'"')},n.attrs=function(e,t){var o=[],r=Object.keys(e);if(r.length)for(var a=0;a<r.length;++a){var s=r[a],l=e[s];"class"==s?(l=i(l))&&o.push(" "+s+'="'+l+'"'):o.push(n.attr(s,l,!1,t))}return o.join("")};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},l=/[&<>"]/g;n.escape=a,n.rethrow=function t(n,o,i,r){if(!(n instanceof Error))throw n;if(!("undefined"==typeof window&&o||r))throw n.message+=" on line "+i,n;try{r=r||e("fs").readFileSync(o,"utf8")}catch(e){t(n,null,i)}var a=3,s=r.split("\n"),l=Math.max(i-a,0),c=Math.min(s.length,i+a),a=s.slice(l,c).map(function(e,t){var n=t+l+1;return(n==i?"  > ":"    ")+n+"| "+e}).join("\n");throw n.path=o,n.message=(o||"Jade")+":"+i+"\n"+a+"\n\n"+n.message,n},n.DebugItem=function(e,t){this.lineno=e,this.filename=t}},{fs:2}],2:[function(e,t,n){},{}]},{},[1])(1)}),define("jade",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("jade!app/text/postbox",function(){var e=function(e){return function(t){var n,o=[],i=t||{};return function(t,i,r,a){o.push('<div class="isso-postbox"><div class="form-wrapper"><section class="auth-section"><p class="input-wrapper"><input id="author" type="text" name="author"'+e.attr("placeholder",r("postbox-author"),!0,!1)+e.attr("value",null!==t?""+t:"",!0,!1)+'/><label for="author">Nickname</label></p><p class="input-wrapper"><input id="email" type="email" name="email"'+e.attr("placeholder",r("postbox-email"),!0,!1)+e.attr("value",null!=i?""+i:"",!0,!1)+'/><label for="email">Email</label><abbr'+e.attr("title",r("postbox-email-info"),!0,!1)+' class="postbox-email-info">?</abbr><span class="postbox-email-tooltip tooltip-hidden">'+e.escape(null==(n=r("postbox-email-info"))?"":n)+'</span></p><p class="input-wrapper"><input id="website" type="text" name="website"'+e.attr("placeholder",r("postbox-website"),!0,!1)+e.attr("value",null!=a?""+a:"",!0,!1)+'/><label for="website">Trang Web</label></p></section><div class="comment-form"><div class="comment-form__control-panel"><markdown-toolbar for="textarea_1" role="toolbar" tabindex="0" class="comment-form__toolbar"><div class="comment-form__toolbar-group"><md-header title="Add title text" aria-label="add header text" role="button" class="comment-form__toolbar-item"><svg viewbox="0 0 18 16" version="1.1" width="18" height="16" aria-hidden="true" class="comment-form__toolbar-icon"><path fill-rule="evenodd" d="M13.62 9.08L12.1 3.66h-.06l-1.5 5.42h3.08zM5.7 10.13S4.68 6.52 4.53 6.02h-.08l-1.13 4.11H5.7zM17.31 14h-2.25l-.95-3.25h-4.07L9.09 14H6.84l-.69-2.33H2.87L2.17 14H0l3.3-9.59h2.5l2.17 6.34L10.86 2h2.52l3.94 12h-.01z"></path></svg></md-header><md-bold title="Add bold text" aria-label="add bold text" role="button" hotkey="b" class="comment-form__toolbar-item"><svg viewbox="0 0 18 16" version="1.1" width="18" height="16" aria-hidden="true" class="comment-form__toolbar-icon"><path fill-rule="evenodd" d="M1 2h3.83c2.48 0 4.3.75 4.3 2.95 0 1.14-.63 2.23-1.67 2.61v.06c1.33.3 2.3 1.23 2.3 2.86 0 2.39-1.97 3.52-4.61 3.52H1V2zm3.66 4.95c1.67 0 2.38-.66 2.38-1.69 0-1.17-.78-1.61-2.34-1.61H3.13v3.3h1.53zm.27 5.39c1.77 0 2.75-.64 2.75-1.98 0-1.27-.95-1.81-2.75-1.81h-1.8v3.8h1.8v-.01z"></path></svg></md-bold><md-italic title="Add italic text" aria-label="add italic text" role="button" hotkey="i" class="comment-form__toolbar-item"><svg viewbox="0 0 18 16" version="1.1" width="18" height="16" aria-hidden="true" class="comment-form__toolbar-icon"><path fill-rule="evenodd" d="M2.81 5h1.98L3 14H1l1.81-9zm.36-2.7c0-.7.58-1.3 1.33-1.3.56 0 1.13.38 1.13 1.03 0 .75-.59 1.3-1.33 1.3-.58 0-1.13-.38-1.13-1.03z"></path></svg></md-italic></div><div class="comment-form__toolbar-group"><md-quote title="Add quote" aria-label="add quote" role="button" class="comment-form__toolbar-item"><svg viewbox="0 0 18 16" version="1.1" width="18" height="16" aria-hidden="true" class="comment-form__toolbar-icon"><path fill-rule="evenodd" d="M6.16 3.5C3.73 5.06 2.55 6.67 2.55 9.36c.16-.05.3-.05.44-.05 1.27 0 2.5.86 2.5 2.41 0 1.61-1.03 2.61-2.5 2.61-1.9 0-2.99-1.52-2.99-4.25 0-3.8 1.75-6.53 5.02-8.42L6.16 3.5zm7 0c-2.43 1.56-3.61 3.17-3.61 5.86.16-.05.3-.05.44-.05 1.27 0 2.5.86 2.5 2.41 0 1.61-1.03 2.61-2.5 2.61-1.89 0-2.98-1.52-2.98-4.25 0-3.8 1.75-6.53 5.02-8.42l1.14 1.84h-.01z"></path></svg></md-quote><md-code title="Add code" aria-label="add code" role="button" class="comment-form__toolbar-item"><svg viewbox="0 0 18 16" version="1.1" width="18" height="16" aria-hidden="true" class="comment-form__toolbar-icon"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"></path></svg></md-code><md-link title="Add link" aria-label="add link" role="button" hotkey="k" class="comment-form__toolbar-item"><svg viewbox="0 0 18 16" version="1.1" width="18" height="16" aria-hidden="true" class="comment-form__toolbar-icon"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></md-link></div><div class="comment-form__toolbar-group"><md-unordered-list title="Add unordered list" aria-label="add unordered list" role="button" class="comment-form__toolbar-item"><svg viewbox="0 0 18 16" version="1.1" width="18" height="16" aria-hidden="true" class="comment-form__toolbar-icon"><path fill-rule="evenodd" d="M2 13c0 .59 0 1-.59 1H.59C0 14 0 13.59 0 13c0-.59 0-1 .59-1h.81c.59 0 .59.41.59 1H2zm2.59-9h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1H4.59C4 2 4 2.41 4 3c0 .59 0 1 .59 1zM1.41 7H.59C0 7 0 7.41 0 8c0 .59 0 1 .59 1h.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm0-5H.59C0 2 0 2.41 0 3c0 .59 0 1 .59 1h.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm10 5H4.59C4 7 4 7.41 4 8c0 .59 0 1 .59 1h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm0 5H4.59C4 12 4 12.41 4 13c0 .59 0 1 .59 1h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01z"></path></svg></md-unordered-list><md-ordered-list title="Add ordered list" aria-label="add ordered list" role="button" class="comment-form__toolbar-item"><svg viewbox="0 0 18 16" version="1.1" width="18" height="16" aria-hidden="true" class="comment-form__toolbar-icon"><path fill-rule="evenodd" d="M12.01 13c0 .59 0 1-.59 1H4.6c-.59 0-.59-.41-.59-1 0-.59 0-1 .59-1h6.81c.59 0 .59.41.59 1h.01zM4.6 4h6.81C12 4 12 3.59 12 3c0-.59 0-1-.59-1H4.6c-.59 0-.59.41-.59 1 0 .59 0 1 .59 1zm6.81 3H4.6c-.59 0-.59.41-.59 1 0 .59 0 1 .59 1h6.81C12 9 12 8.59 12 8c0-.59 0-1-.59-1zm-9.4-6h-.72c-.3.19-.58.25-1.03.34V2h.75v2.14H.17V5h2.84v-.86h-1V1zm.392 8.12c-.129 0-.592.04-.802.07.53-.56 1.14-1.25 1.14-1.89C2.72 6.52 2.18 6 1.38 6c-.59 0-.97.2-1.38.64l.58.58c.19-.19.38-.38.64-.38.28 0 .48.16.48.52 0 .53-.77 1.2-1.7 2.06V10h3v-.88h-.598zm-.222 3.79v-.03c.44-.19.64-.47.64-.86 0-.7-.56-1.11-1.44-1.11-.48 0-.89.19-1.28.52l.55.64c.25-.2.44-.31.69-.31.27 0 .42.13.42.36 0 .27-.2.44-.86.44v.75c.83 0 .98.17.98.47 0 .25-.23.38-.58.38-.28 0-.56-.14-.81-.38l-.48.66c.3.36.77.56 1.41.56.83 0 1.53-.41 1.53-1.16 0-.5-.31-.81-.77-.94v.01z"></path></svg></md-ordered-list></div></markdown-toolbar></div><textarea id="textarea_1" contenteditable="true" class="textarea placeholder">'+e.escape(null==(n=r("postbox-text"))?"":n)+'</textarea><input type="hidden" id="custId" class="custId"/><div class="preview"><div class="isso-comment"><div class="text"></div></div></div></div><p class="post-action"><input type="submit"'+e.attr("value",r("postbox-submit"),!0,!1)+'/></p><p class="post-action"><input type="button" name="preview"'+e.attr("value",r("postbox-preview"),!0,!1)+'/></p><p class="post-action"><input type="button" name="edit"'+e.attr("value",r("postbox-edit"),!0,!1)+'/></p><section class="notification-section"><label><input type="checkbox" name="notification" checked="checked"/>'+e.escape(null==(n=r("postbox-notification"))?"":n)+"</label></section></div></div>")}.call(this,"author"in i?i.author:"undefined"!=typeof author?author:void 0,"email"in i?i.email:"undefined"!=typeof email?email:void 0,"i18n"in i?i.i18n:"undefined"!=typeof i18n?i18n:void 0,"website"in i?i.website:"undefined"!=typeof website?website:void 0),o.join("")}};return e.compiled=!0,e}),define("jade!app/text/comment",function(){var e=function(e){return function(t){var n,o=[],i=t||{};return function(t,i,r,a,s,l,c){o.push("<div"+e.attr("id","isso-"+i.id,!0,!1)+' class="isso-comment">'),r.gravatar&&o.push('<div class="avatar"><img'+e.attr("src",""+i.gravatar_image,!0,!1)+"/></div>"),r.avatar&&o.push('<div class="avatar"><svg'+e.attr("data-hash",""+i.hash,!0,!1)+"></svg></div>"),o.push('<div class="text-wrapper"><div role="meta" class="isso-comment-header">'),t(i.website)?o.push("<a"+e.attr("href",""+i.website,!0,!1)+' rel="nofollow" class="author">'+e.escape(null==(n=t(i.author)?i.author:l("comment-anonymous"))?"":n)+"</a>"):o.push('<span class="author">'+e.escape(null==(n=t(i.author)?i.author:l("comment-anonymous"))?"":n)+"</span>"),o.push("<br/><a"+e.attr("href","#isso-"+i.id,!0,!1)+' class="permalink">#'+e.escape(null==(n=i.id)?"":n)+" • <time"+e.attr("title",""+s(i.created),!0,!1)+e.attr("datetime",""+a(i.created),!0,!1)+'></time></a><span class="note">'+e.escape(null==(n=2==i.mode?l("comment-queued"):4==i.mode?l("comment-deleted"):"")?"":n)+"</span>"),r.vote,o.push('<div class="vote"><a href="#" class="upvote">'+(null==(n=c["arrow-up"])?"":n)+'</a><a href="#" class="downvote">'+(null==(n=c["arrow-down"])?"":n)+'</a></div></div><div class="text">'),4==i.mode?o.push("<p>&nbsp;</p>"):o.push(null==(n=i.text)?"":n),o.push('</div><div class="isso-comment-footer"><a href="#" class="reply">'+e.escape(null==(n=l("comment-reply"))?"":n)+'</a><a href="#" class="edit">'+e.escape(null==(n=l("comment-edit"))?"":n)+'</a><a href="#" class="delete">'+e.escape(null==(n=l("comment-delete"))?"":n)+'</a></div><div class="isso-follow-up"></div></div></div>')}.call(this,"bool"in i?i.bool:"undefined"!=typeof bool?bool:void 0,"comment"in i?i.comment:"undefined"!=typeof comment?comment:void 0,"conf"in i?i.conf:"undefined"!=typeof conf?conf:void 0,"datetime"in i?i.datetime:"undefined"!=typeof datetime?datetime:void 0,"humanize"in i?i.humanize:"undefined"!=typeof humanize?humanize:void 0,"i18n"in i?i.i18n:"undefined"!=typeof i18n?i18n:void 0,"svg"in i?i.svg:"undefined"!=typeof svg?svg:void 0),o.join("")}};return e.compiled=!0,e}),define("jade!app/text/comment-loader",function(){var e=function(e){return function(t){var n,o=[],i=t||{};return function(t,i){o.push("<div"+e.attr("id","isso-loader-"+t.name,!0,!1)+' class="isso-comment-loader"><a href="#" class="load_hidden">'+e.escape(null==(n=i("comment-hidden",t.hidden_replies))?"":n)+"</a></div>")}.call(this,"comment"in i?i.comment:"undefined"!=typeof comment?comment:void 0,"pluralize"in i?i.pluralize:"undefined"!=typeof pluralize?pluralize:void 0),o.join("")}};return e.compiled=!0,e}),define("app/jade",["libjs-jade-runtime","app/utils","jade!app/text/postbox","jade!app/text/comment","jade!app/text/comment-loader"],function(runtime,utils,tt_postbox,tt_comment,tt_comment_loader){"use strict";var globals={},templates={},load=function(name,js){templates[name]=function(jade){var fn;return js.compiled?js(jade):(eval("fn = "+js),fn)}(runtime)},set=function(e,t){globals[e]=t};return load("postbox",tt_postbox),load("comment",tt_comment),load("comment-loader",tt_comment_loader),set("bool",function(e){return!!e}),set("humanize",function(e){return"object"!=typeof e&&(e=new Date(1e3*parseInt(e,10))),e.toString()}),set("datetime",function(e){return"object"!=typeof e&&(e=new Date(1e3*parseInt(e,10))),[e.getUTCFullYear(),utils.pad(e.getUTCMonth(),2),utils.pad(e.getUTCDay(),2)].join("-")+"T"+[utils.pad(e.getUTCHours(),2),utils.pad(e.getUTCMinutes(),2),utils.pad(e.getUTCSeconds(),2)].join(":")+"Z"}),{set:set,render:function(e,t){var n;if(!templates[e])throw new Error("Template not found: '"+e+"'");t=t||{};var o=[];for(var i in t)t.hasOwnProperty(i)&&!globals.hasOwnProperty(i)&&(o.push(i),globals[i]=t[i]);n=templates[e](globals);for(var r=0;r<o.length;r++)delete globals[o[r]];return n}}}),define("app/lib/editor",["app/dom","app/i18n"],function(e,t){"use strict";return function(t){return t=e.htmlify(t),t.setAttribute("contentEditable",!0),t.on("focus",function(){t.classList.contains("placeholder")&&(t.innerHTML="",t.classList.remove("placeholder"))}),t}}),define("app/lib/identicons",["app/lib/promise","app/config"],function(e,t){"use strict";var n=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},o=function(e,t,n,o,i,r){var a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("x",o+t*i),a.setAttribute("y",o+n*i),a.setAttribute("width",i),a.setAttribute("height",i),a.setAttribute("style","fill: "+r),e.appendChild(a)},i=function(i,r,a){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");return s.setAttribute("version","1.1"),s.setAttribute("viewBox","0 0 "+a+" "+a),s.setAttribute("preserveAspectRatio","xMinYMin meet"),s.setAttribute("shape-rendering","crispEdges"),o(s,0,0,0,a+2*r,t["avatar-bg"]),null===typeof i?s:(e.when(i,function(e){var i=n((parseInt(e.substr(-16),16)%Math.pow(2,18)).toString(2),18),a=0;s.setAttribute("data-hash",e);for(var l=parseInt(i.substring(i.length-3,i.length),2),c=t["avatar-fg"][l%t["avatar-fg"].length],d=0;d<Math.ceil(2.5);d++)for(var p=0;p<5;p++)"1"===i.charAt(a)&&(o(s,d,p,r,8,c),d<Math.floor(2.5)&&o(s,4-d,p,r,8,c)),a++}),s)};return{generate:i,blank:function(e,t){var n=parseInt([0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,0].join(""),2).toString(16),o=i(n,e,t);return o.setAttribute("className","blank"),o}}}),define("app/lib",["require","app/lib/editor","app/lib/identicons"],function(e){return{editorify:e("app/lib/editor"),identicons:e("app/lib/identicons")}}),define("app/isso",["app/dom","app/utils","app/config","app/api","app/jade","app/i18n","app/lib","app/globals"],function(e,t,n,o,i,r,a,s){"use strict";var l=function(r){var s=t.localStorageImpl,l=e.htmlify(i.render("postbox",{author:JSON.parse(s.getItem("author")),email:JSON.parse(s.getItem("email")),website:JSON.parse(s.getItem("website")),preview:""}));l.onsuccess=function(){},l.validate=function(){return t.text(e("textarea",this).value).length<3||e("textarea",this).classList.contains("placeholder")?(e("textarea",this).focus(),!1):n["require-email"]&&e("[name='email']",this).value.length<=0?(e("[name='email']",this).focus(),!1):!(n["require-author"]&&e("[name='author']",this).value.length<=0)||(e("[name='author']",this).focus(),!1)};var c=function(){n["reply-notifications"]&&e("[name='email']",l).value.length>=0?e(".notification-section",l).show():e(".notification-section",l).hide()};e("[name='email']",l).on("input",c),c(),n["require-email"]&&e("[name='email']",l).setAttribute("placeholder",e("[name='email']",l).getAttribute("placeholder").replace(/ \(.*\)/,"")),n["require-author"]&&(e("[name='author']",l).placeholder=e("[name='author']",l).placeholder.replace(/ \(.*\)/,"")),e("[name='preview']",l).on("click",function(){o.preview(t.text(e("textarea",l).value)).then(function(t){e(".preview .text",l).innerHTML=t,l.classList.add("preview-mode")})}),e("[class='postbox-email-info']",l).on("click",function(){e(".postbox-email-tooltip",l).classList.toggle("tooltip-hidden")});var p=function(){e(".preview .text",l).innerHTML="",l.classList.remove("preview-mode")};return e("[name='edit']",l).on("click",p),e(".preview",l).on("click",p),e("[type=submit]",l).on("click",function(){if(p(),l.validate()){var n=e("[name=author]",l).value||null,i=e("[name=email]",l).value||null,a=e("[name=website]",l).value||null;s.setItem("author",JSON.stringify(n)),s.setItem("email",JSON.stringify(i)),s.setItem("website",JSON.stringify(a)),o.create(e("#isso-thread").getAttribute("data-isso-id"),{author:n,email:i,website:a,text:t.text(document.getElementById("custId").value+e("textarea",l).value),parent:r||null,title:e("#isso-thread").getAttribute("data-title")||null,notification:e("[name=notification]",l).checked()?1:0}).then(function(t){e("textarea",l).value="",e("textarea",l).blur(),d(t,!0),null!==r&&l.onsuccess()})}}),a.editorify(e("textarea",l)),l},c=function(t,r){var a;null===t.id?(a=e("#isso-root"),t.name="null"):(a=e("#isso-"+t.id+" > .text-wrapper > .isso-follow-up"),t.name=t.id);var s=e.htmlify(i.render("comment-loader",{comment:t}));a.append(s),e("a.load_hidden",s).on("click",function(){s.remove(),o.fetch(e("#isso-thread").getAttribute("data-isso-id"),n["reveal-on-click"],n["max-comments-nested"],t.id,r).then(function(e){if(0!==e.total_replies){var t=0;e.replies.forEach(function(e){d(e,!1),e.created>t&&(t=e.created)}),e.hidden_replies>0&&c(e,t)}},function(e){console.log(e)})})},d=function(p,u){var m=e.htmlify(i.render("comment",{comment:p})),f=function(){e(".permalink > time",m).textContent=t.ago(s.offset.localTime(),new Date(1e3*parseInt(p.created,10))),setTimeout(f,6e4)};f(),n.avatar&&e("div.avatar > svg",m).replace(a.identicons.generate(p.hash,4,48));var h;h=e(null===p.parent?"#isso-root":"#isso-"+p.parent+" > .text-wrapper > .isso-follow-up"),h.append(m),u&&m.scrollIntoView();var v=e("#isso-"+p.id+" > .text-wrapper > .isso-comment-footer"),b=e("#isso-"+p.id+" > .text-wrapper > .isso-comment-header"),g=e("#isso-"+p.id+" > .text-wrapper > .text"),x=document.getElementById("custId"),w='@&lt;b id="author"&gt;'+p.author+'&lt;/b&gt;&lt;a href="#isso-'+p.id+'"&gt;#'+p.id+"&lt;/a&gt;:&nbsp;",y=null;if(e("a.reply",v).toggle("click",function(t){y=v.insertAfter(new l(null===p.parent?p.id:p.parent)),y.onsuccess=function(){t.next()},e(".textarea",y).focus(),x.value=w,e("a.reply",v).textContent=r.translate("comment-close")},function(){y.remove(),e("a.reply",v).textContent=r.translate("comment-reply")}),n.vote){var k=n["vote-levels"];"string"==typeof k&&(k=k.split(","));var _=function(t){var n=e("span.votes",b);if(null===n?b.prepend(e.new("span.votes",t)):n.textContent=t,t?m.classList.remove("isso-no-votes"):m.classList.add("isso-no-votes"),k)for(var o=!0,i=0;i<=k.length;i++)o&&(i>=k.length||t<k[i])?(m.classList.add("isso-vote-level-"+i),o=!1):m.classList.remove("isso-vote-level-"+i)};e("a.upvote",b).on("click",function(){o.like(p.id).then(function(e){_(e.likes-e.dislikes)})}),e("a.downvote",b).on("click",function(){o.dislike(p.id).then(function(e){_(e.likes-e.dislikes)})}),_(p.likes-p.dislikes)}e("a.edit",v).toggle("click",function(i){var s=e("a.edit",v);(n.avatar||n.gravatar)&&e(".avatar",m,!1)[0];s.textContent=r.translate("comment-save"),s.insertAfter(e.new("a.cancel",r.translate("comment-cancel"))).on("click",function(){i.canceled=!0,i.next()}),i.canceled=!1,o.view(p.id,1).then(function(n){var o=a.editorify(e.new("textarea.textarea"));o.value=t.detext(n.text),o.focus(),g.classList.remove("text"),g.classList.add("comment-form"),g.textContent="",g.append(o)})},function(i){var a=e("textarea",g);(n.avatar||n.gravatar)&&e(".avatar",m,!1)[0];if(i.canceled||null===a)g.innerHTML=p.text;else{if(t.text(a.value).length<3)return a.focus(),void i.wait();o.modify(p.id,{text:t.text(a.value)}).then(function(e){g.innerHTML=e.text,p.text=e.text})}g.classList.remove("comment-form"),g.classList.add("text"),e("a.cancel",v).remove(),e("a.edit",v).textContent=r.translate("comment-edit")}),e("a.delete",v).toggle("click",function(t){var n=e("a.delete",v),o=!t.state;n.textContent=r.translate("comment-confirm"),n.on("mouseout",function(){n.textContent=r.translate("comment-delete"),t.state=o,n.onmouseout=null})},function(){var t=e("a.delete",v);o.remove(p.id).then(function(n){n?m.remove():(e("span.note",b).textContent=r.translate("comment-deleted"),g.innerHTML="<p>&nbsp;</p>",e("a.edit",v).remove(),e("a.delete",v).remove()),t.textContent=r.translate("comment-delete")})});var z=function(n){t.cookie("isso-"+p.id)?setTimeout(function(){z(n)},15e3):null!==e(n,v)&&e(n,v).remove()};z("a.edit"),z("a.delete");var j=function(e){t.cookie("isso-"+p.id)?setTimeout(function(){j(e)},15e3):v.append(e)};if(!n["reply-to-self"]&&t.cookie("isso-"+p.id)&&j(e("a.reply",v).detach()),p.hasOwnProperty("replies")){var C=0;p.replies.forEach(function(e){d(e,!1),e.created>C&&(C=e.created)}),p.hidden_replies>0&&c(p,C)}};return{insert:d,insert_loader:c,Postbox:l}}),define("app/count",["app/api","app/dom","app/i18n"],function(e,t,n){return function(){var o={};t.each("a",function(e){if(e.href.match&&e.href.match(/#isso-thread$/)){var t=e.getAttribute("data-isso-id")||e.href.match(/^(.+)#isso-thread$/)[1].replace(/^.*\/\/[^\/]+/,"");t in o?o[t].push(e):o[t]=[e]}});var i=Object.keys(o);e.count(i).then(function(e){for(var t in o)if(o.hasOwnProperty(t))for(var r=i.indexOf(t),a=0;a<o[t].length;a++)o[t][a].textContent=n.pluralize("num-comments",e[r])})}}),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("text!app/../../css/isso.css",[],function(){return'html {\n    overflow-x: hidden;\n    margin: 0;}\nhtml, body{\n    padding: 0;\n    box-sizing: border-box;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n\n}\n*, *::before, *::after {\n    box-sizing: inherit;}\n\n#isso-thread {\n    border-radius: .34rem;\n    padding: 8px;\n    background-color: #171f2e\n}\n\n#isso-thread * {\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box\n}\n\n#isso-thread :focus:not(.focus-visible):not(.button) {\n    outline: 0\n}\n\n#isso-thread .comment-form {\n    margin-top: 5px;\n    background: #22201c;\n    border-color: #333;\n    position: relative;\n    display: block;\n    border-style: solid;\n    border-width: 6px 12px 12px;\n    border-radius: 2px\n}\n\n#isso-thread .comment-form .textarea {\n    background: repeat rgba(0,0,0,.4);\n    box-shadow: 0 1px 2px rgba(0,0,0,.12)inset;\n    transition: background-color .2s ease 0s\n}\n\n#isso-thread .comment-form__toolbar {\n    display: block;\n    float: right;\n    background: #333\n}\n\n#isso-thread .comment-form__toolbar:focus:not(.focus-visible):not(.button) {\n    outline: 0\n}\n\n#isso-thread .comment-form__control-panel {\n    background: #333;\n    height: 30px\n}\n\n#isso-thread .comment-form__toolbar-file-input {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    overflow: hidden;\n    clip: rect(0 0 0 0)\n}\n\n#isso-thread .comment-form__toolbar-item {\n    background: 0 0;\n    border: 0;\n    color: var(--color37);\n    display: flex;\n    float: left;\n    height: 24px;\n    width: 24px;\n    justify-content: center;\n    align-items: center\n}\n\n#isso-thread .comment-form__toolbar-item:hover {\n    color: #0aa\n}\n\n#isso-thread .comment-form__toolbar-icon {\n    color: #fff;\n    display: inline-block;\n    fill: currentColor\n}\n\n#isso-thread .comment-form__toolbar-group {\n    display: inline-block;\n    margin-left: 20px\n}\n\n#isso-thread .comment-form__toolbar-group:first-child {\n    margin-left: 0\n}\n\n#isso-thread .isso-comment-header a {\n    text-decoration: none\n}\n\n#isso-thread .isso-comment-loader a {\n    color: #00f382;\n}\n\n#isso-thread>h4 {\n    color: #fff;\n    font-weight: 700\n}\n\n#isso-thread>.isso-feedlink {\n    float: right;\n    padding-left: 1em\n}\n\n#isso-thread>.isso-feedlink>a {\n    font-size: .8em;\n    vertical-align: bottom\n}\n\n#isso-thread .textarea {\n    color: #eee;\n    --height:calc(16px * 1.4 * 4 + 10px * 2);display: block;\n    box-sizing: border-box;\n    width: 100%;\n    height: var(--height);\n    min-height: var(--height);\n    padding: 10px 12px;\n    margin: 0;\n    font-size: 16px;\n    line-height: 1.4;\n    border: 0;\n    resize: none;\n    -webkit-backface-visibility: hidden;\n    backface-visibility: hidden;\n    transform: translateZ(0)\n}\n\n#isso-thread .textarea:focus {\n    box-shadow: 0 0 0 2px rgba(37,156,154,.4);\n    border-color: #259c9a;\n    outline: none\n}\n\n#isso-thread .textarea:disabled {\n    color: #777\n}\n\n#isso-thread .textarea.placeholder {\n    color: #fff;\n}\n\n#isso-thread input:focus {\n    border-color: #6bb1e0\n}\n\n#isso-root {\n    font-size: .8rem;\n    line-height: 1.3rem\n}\n\n#isso-root .isso-comment {\n    padding-top: .95em\n}\n\n#isso-root .text {\n    color: #fff;\n    margin: 8px\n}\n\n#isso-root>blockquote {\n    margin: 0 0 0 1.5rem;\n    padding: 0 0 0 .4rem;\n    font-size: 1.05rem;\n    line-height: 1.75;\n    color: inherit;\n    opacity: .8;\n    position: relative;\n    border-left: .3rem solid #fcfcfa\n}\n\n#isso-root .preview .isso-comment {\n    padding-top: 0;\n    margin: 0\n}\n\n.isso-comment>div.avatar {\n    display: block;\n    float: left;\n    width: 40px;\n    margin: 8px 0 0 8px\n}\n\n.isso-comment>div.avatar>svg {\n    max-width: 48px;\n    max-height: 48px;\n    border-radius: 50%\n}\n\n.isso-comment>div.text-wrapper {\n    display: block;\n    border-left: 2px solid #922428;\n    border-top: 1px solid #3c51777a\n}\n\n.isso-comment>div.text-wrapper .text>p>code {\n    background: #652828;\n    padding: 2px\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-header {\n    text-indent: 5px;\n    font-size: .93em;\n    height: 40px;\n    margin: 8px\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-header .spacer {\n    padding: 0 6px;\n    color: gray!important;\n    font-weight: 400;\n    text-shadow: none!important\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-header .spacer:hover {\n    color: #606060!important\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-header a.permalink {\n    color: #888!important;\n    font-weight: 400;\n    text-shadow: none!important;\n    font-style: italic;\n    margin-left: 5px\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-header .vote {\n    float: right;\n    position: relative;\n    bottom: 2.5em\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-header a.permalink:hover {\n    color: #606060!important\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-header .note {\n    color: #da5656!important;\n    font-weight: 400;\n    text-shadow: none!important;\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-header .note:hover {\n    color: #606060!important\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-header a.parent {\n    color: gray!important;\n    font-weight: 400;\n    text-shadow: none!important\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-header a.parent:hover {\n    color: #606060!important\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-header .author {\n    font-weight: 700;\n    color: #00f38e\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-header .votes {\n    color: gray\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-header .upvote svg,.isso-comment>div.text-wrapper>.isso-comment-header .downvote svg {\n    position: relative;\n    top: .2em\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-footer {\n    font-size: .95em;\n    font-size: .8em;\n    color: gray!important;\n    clear: left;\n    margin-left: 15px\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-footer a {\n    font-weight: 700;\n    text-decoration: none\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-footer a:hover {\n    color: #34ff72!important;\n    text-shadow: #aaa 0 0 1px!important\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-footer>a {\n    position: relative;\n    top: .2em;\n    color: #FB8C00;\n}\n\n.isso-comment>div.text-wrapper>.isso-comment-footer>a+a {\n    padding: 2px;\n    color: #0ca22e\n}\n\n.isso-comment>div.text-wrapper>.textarea-wrapper .textarea,.isso-comment>div.text-wrapper>.textarea-wrapper .preview {\n    margin-top: .2em\n}\n\n.isso-comment>div.text-wrapper>div.text p {\n    margin-top: .2em\n}\n\n.isso-comment>div.text-wrapper>div.text p:last-child {\n    margin-bottom: .2em\n}\n\n.isso-comment>div.text-wrapper>div.text h1,.isso-comment>div.text-wrapper>div.text h2,.isso-comment>div.text-wrapper>div.text h3,.isso-comment>div.text-wrapper>div.text h4,.isso-comment>div.text-wrapper>div.text h5,.isso-comment>div.text-wrapper>div.text h6 {\n    font-size: 130%;\n    font-weight: 700\n}\n\n.isso-comment>div.text-wrapper>div.textarea-wrapper .textarea,.isso-comment>div.text-wrapper>div.textarea-wrapper .preview {\n    width: 100%;\n    border: 1px solid #f0f0f0;\n    border-radius: 2px;\n    box-shadow: 0 0 2px #888\n}\n\n.isso-comment .isso-follow-up {\n    padding-left: 12px\n}\n\n.isso-comment .isso-postbox {\n    padding: 10px 0 10px 10px\n}\n\n.isso-feedlink {\n    font-weight: 700;\n    text-decoration: none\n}\n\n.isso-feedlink:hover {\n    color: #111!important;\n    text-shadow: #aaa 0 0 1px!important\n}\n\n.isso-comment.isso-no-votes span.votes {\n    display: none\n}\n\n.post-action {\n    display: block;\n    float: right;\n    margin: 10px 5px\n}\n\n.post-action>input {\n    padding: calc(.3em - 1px);\n    border-radius: 5px;\n    border: 1px solid;\n    background-color: #005086;\n    cursor: pointer;\n    line-height: 1.5em;\n    font-weight: bolder;\n    color: #fff\n}\n\n.post-action>input:hover,.post-action>input:active {\n    background-color: #802626\n}\n\n.isso-postbox {\n    margin: 0 auto 2em;\n    clear: right\n}\n\n.isso-postbox>.form-wrapper {\n    display: block;\n    padding: 0\n}\n\n.isso-postbox>.form-wrapper>.auth-section .input-wrapper {\n    width: 100%;\n    position: relative;\n    display:block;\n    max-width: 100%;\n    margin: 0 0 .3em\n}\n\n.isso-postbox>.form-wrapper>.auth-section .input-wrapper input {\n    color: #ddd;\n    border: none;\n    padding: 10px 0 0;\n    border-radius: 3px;\n    outline: none;\n    width: auto;\n    min-width: 100%;\n    font-size: 13.8px;\n    line-height: 2em;\n    text-indent: 10px;\n    border-bottom: 2px solid #a2a2a2;\n    background-color: #0e131c8f\n}\n\n.isso-postbox>.form-wrapper>.auth-section .input-wrapper input:-webkit-autofill {\n    background-color: transparent!important;\n    box-shadow: 0 0 0 50px #000000e0 inset;\n    -webkit-text-fill-color: #ff0!important\n}\n\n.isso-postbox>.form-wrapper>.auth-section .input-wrapper:first-child,.isso-postbox>.form-wrapper>.auth-section .input-wrapper:nth-child(2) {\n    display: inline-block;\n    position: relative;\n    max-width: 50%;\n    margin: 0;\n    padding: 1px\n}\n\n.isso-postbox>.form-wrapper .preview {\n    display: none;\n    overflow: hidden;\n    font-size: 16px;\n    line-height: 1.2;\n    border: 1px dashed;\n    border-radius: 2px;\n    color: #ddd;\n    border-color: #22201c;\n    background: #22201c\n}\n\n.isso-postbox>.form-wrapper input[type=checkbox] {\n    vertical-align: middle;\n    position: relative;\n    bottom: 1px;\n    margin-left: 0\n}\n\n.isso-postbox>.form-wrapper .notification-section {\n    font-size: .8rem;\n    padding-top: .8em\n}\n\n.isso-postbox>.form-wrapper input[name=edit],.isso-postbox>.form-wrapper>.notification-section {\n    display: none\n}\n\n.isso-postbox.preview-mode>.form-wrapper input[name=preview] {\n    display: none\n}\n\n.isso-postbox.preview-mode>.form-wrapper .textarea {\n    display: none!important\n}\n\n.isso-postbox.preview-mode>.form-wrapper .preview {\n    display: block;\n    padding: 7px 11px;\n    min-width: 100%\n}\n\n.isso-postbox.preview-mode>.form-wrapper input[name=edit] {\n    display: inline\n}\n\n.isso-postbox>.form-wrapper>.auth-section .input-wrapper input {\n        width: 100%\n    }\n\n.input-wrapper {\n    display: block;\n    position: relative\n}\n\n.input-wrapper label {\n    position: absolute;\n    color: #fff;\n    left: 5px;\n    top: 0;\n    cursor: text;\n    font-size: 50%;\n    opacity: 1;\n    transition: all .2s\n}\n\n.input-wrapper input {\n    font-size: inherit;\n    padding-top: 1em;\n    margin-bottom: 2px;\n    border: 0;\n    border-radius: 0;\n    border-bottom: 2px solid rgba(0,0,0,.1)\n}\n\n.input-wrapper input::placeholder {\n    opacity: 1;\n    transition: all .2s\n}\n\n.input-wrapper input:placeholder-shown:not(:focus)::placeholder {\n    opacity: 0\n}\n\n.input-wrapper input:placeholder-shown:not(:focus)+* {\n    font-size: .8rem;\n    opacity: .5;\n    top: .7rem\n}\n\n.input-wrapper input:focus {\n    outline: none;\n    border-color: rgba(0,0,0,.5)\n}\n.isso-postbox > .form-wrapper > .auth-section .postbox-email-info {\n    color: #000000;\n    border-radius: 50%;\n    border: 1px solid #acacac;\n    text-align: center;\n    display: inline-block;\n    cursor: pointer;\n    background-color: #d2d2d2;\n    vertical-align: middle;\n    line-height: 1.4em;\n    height: 1.4em;\n    width: 1.4em;\n    text-decoration: none;\n    margin: 7px 7px 14px 0px;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n}\n.isso-postbox > .form-wrapper > .auth-section .input-wrapper input[name=\'email\'] {\n    position: relative;\n    padding-right: 2em;\n}\n.isso-postbox > .form-wrapper > .auth-section .postbox-email-tooltip {\n    position: absolute;\n    right: 2em;\n    top: -0.7em;\n    width: 100%;\n    max-width: 8em;\n    height: auto;\n    z-index: 5;\n    text-align: left;\n    background-color: #e8e8e8;\n    color: #000000;\n    border: 1px solid #acacac;\n    border-radius: 5px;\n    box-shadow: 0 2px 9px 0 rgba(123,123,123,0.15);\n    padding: 0.3em;\n}\n.isso-postbox .tooltip-hidden {\n    display: none;\n}\n'}),define("app/text/css",["text!../../../css/isso.css"],function(e){return{inline:e}}),define("text!app/text/arrow-down.svg",[],function(){return'\x3c!-- Generator: IcoMoon.io --\x3e<svg width="16" height="16" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="gray">\n  <g>\n    <path d="M 24.773,13.701c-0.651,0.669-7.512,7.205-7.512,7.205C 16.912,21.262, 16.456,21.44, 16,21.44c-0.458,0-0.914-0.178-1.261-0.534 c0,0-6.861-6.536-7.514-7.205c-0.651-0.669-0.696-1.87,0-2.586c 0.698-0.714, 1.669-0.77, 2.522,0L 16,17.112l 6.251-5.995 c 0.854-0.77, 1.827-0.714, 2.522,0C 25.47,11.83, 25.427,13.034, 24.773,13.701z">\n    </path>\n  </g>\n</svg>\n'}),define("text!app/text/arrow-up.svg",[],function(){return'\x3c!-- Generator: IcoMoon.io --\x3e<svg width="16" height="16" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="gray">\n  <g>\n    <path d="M 24.773,18.299c-0.651-0.669-7.512-7.203-7.512-7.203C 16.912,10.739, 16.456,10.56, 16,10.56c-0.458,0-0.914,0.179-1.261,0.536 c0,0-6.861,6.534-7.514,7.203c-0.651,0.669-0.696,1.872,0,2.586c 0.698,0.712, 1.669,0.77, 2.522,0L 16,14.89l 6.251,5.995 c 0.854,0.77, 1.827,0.712, 2.522,0C 25.47,20.17, 25.427,18.966, 24.773,18.299z">\n    </path>\n  </g>\n</svg>\n'}),define("app/text/svg",["text!./arrow-down.svg","text!./arrow-up.svg"],function(e,t){return{"arrow-down":e,"arrow-up":t}}),require(["app/lib/ready","app/config","app/i18n","app/api","app/isso","app/count","app/dom","app/text/css","app/text/svg","app/jade"],function(e,t,n,o,i,r,a,s,l,c){"use strict";function d(){if(u=a("#isso-thread"),m=a.new("h4"),t.css&&null===a("style#isso-style")){var e=a.new("style");e.id="isso-style",e.type="text/css",e.textContent=s.inline,a("head").append(e)}if(r(),null===u)return console.log("abort, #isso-thread is missing");if(t.feed){var l=a.new("a",n.translate("atom-feed")),c=a.new("span.isso-feedlink");l.href=o.feed(u.getAttribute("data-isso-id")),c.appendChild(l),u.append(c)}u.append(m),u.append(new i.Postbox(null)),u.append('<div id="isso-root"></div>')}function p(){0!=a("#isso-root").length&&(a("#isso-root").textContent="",o.fetch(u.getAttribute("data-isso-id")||location.pathname,t["max-comments-top"],t["max-comments-nested"]).then(function(e){if(0===e.total_replies)return void(m.textContent=n.translate("no-comments"));var t=0,o=e.total_replies;e.replies.forEach(function(e){i.insert(e,!1),e.created>t&&(t=e.created),o+=e.total_replies}),m.textContent=n.pluralize("num-comments",o),e.hidden_replies>0&&i.insert_loader(e,t),window.location.hash.length>0&&window.location.hash.match("^#isso-[0-9]+$")&&a(window.location.hash).scrollIntoView()},function(e){console.log(e)}))}c.set("conf",t),c.set("i18n",n.translate),c.set("pluralize",n.pluralize),c.set("svg",l);var u,m;e(function(){d(),p()}),window.Isso={init:d,fetchComments:p}}),define("embed",function(){})}();